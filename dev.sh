#!/bin/bash

# Build the development Docker image
echo "Building development environment..."
docker build -f Dockerfile.dev -t bad-apple-dev .

# Run the container with volume mount and drop into shell
echo "Starting container..."
echo "hey babies, run 'cd build && cmake .. && cmake --build .' to rebuild inside container  ♥"
echo "
⣿⠿⠿⢿⣿⣿⣿⡿⠿⣿⣿⣿⣿⣿⣿⣿⣿⠿⠛⠋⠉⠁⠐⠀⠀⠀⠀⠈⠉⠛⠛⠻⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿
⠙⢀⠸⠈⡉⡁⡡⠐⠀⠰⣿⣿⣿⣿⡿⠋⡀⠀⡀⠀⠠⠐⠠⠁⠌⠠⠁⠌⡐⢀⠂⢀⠀⠈⠛⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿
⣿⣶⣾⣶⣷⣶⣶⣶⣶⣾⣿⣿⡿⠋⠠⠀⠠⠀⠄⡁⠂⡁⢂⠡⠈⠄⠁⢂⠐⠠⠈⠄⠂⠡⢀⠀⠹⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡟⠡⠌⠀⡌⠐⡉⠐⢀⠂⡐⢀⠂⠁⠠⠈⠄⡈⠄⡁⢂⠁⠂⠄⢂⠀⠌⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡟⡘⡔⢂⠆⡐⠡⠀⠡⡀⢂⠐⠀⠠⢈⠠⢁⠂⡐⠠⠐⠠⠀⠡⠈⠄⡈⠄⢊⢿⣿⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⡘⡼⠏⡼⢠⠂⣿⠁⣰⡡⠂⠀⡠⠁⠂⠀⡄⢢⠀⠡⠌⠠⠁⢂⠈⠐⠠⢘⡈⡞⣿⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⠃⠐⠄⠠⢁⠂⠌⠁⢠⠃⠁⠀⠰⠁⢀⡄⠀⠄⢫⠗⡐⢈⠂⡁⠬⠀⢈⠀⠂⡅⠠⢹⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⡇⠠⠑⠀⡐⠠⢈⠐⠀⠠⢀⠁⠀⠂⣡⣿⡇⠀⠀⠈⡐⢀⠂⠀⠡⢈⠀⢀⠂⠁⠄⠐⠘⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⡿⠀⠠⠁⠀⠄⡁⢂⠀⠠⠁⠀⠀⠈⣰⣿⣿⡇⠀⠀⠀⠐⠀⠀⠀⢁⠂⠠⠀⠄⠡⠈⠀⠄⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⡇⡇⠠⠁⢈⠀⡐⠠⠀⠐⠀⠀⠀⣠⣿⣭⣭⣿⠘⠀⠀⠀⠀⠂⣁⠀⠌⠀⠐⡀⠂⡁⠂⠀⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⢸⠀⠡⠀⠂⠠⢀⠁⠀⠈⠀⢠⠇⠟⠛⠻⡿⣿⣧⢧⠀⠀⠀⠀⢹⠀⠀⠀⠁⠀⠐⡀⠄⠁⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⢆⠃⠀⠀⠌⠀⠂⠄⠀⢈⢀⠠⠄⠀⠀⠀⠠⠘⣻⣿⣷⣄⡁⢀⢸⣆⠀⡄⠀⠀⠐⠀⠀⠀⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⢸⠀⠀⠀⠂⠈⡐⠀⠈⠀⢸⣷⣱⡤⢄⣡⣷⣾⣿⣿⣿⣿⣿⡮⠃⠈⠀⡁⠀⠀⠀⠀⠠⢰⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⡏⡈⠀⠀⠀⠄⠐⡀⠂⠁⠀⠀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢁⣀⢀⣼⣃⠀⠀⠀⠀⠀⢸⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⡏⠇⠀⠀⠀⡀⠠⢀⠁⠀⠁⣧⢹⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣶⣿⣿⠃⠀⠀⠀⠀⢀⢸⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⡇⠀⡀⠀⠀⠀⠀⠂⠄⠈⠀⢹⣧⣿⣿⣿⣿⣿⣿⣿⣿⣿⣟⣽⣿⣿⣿⠃⠀⠀⠀⠀⠀⢸⢸⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⠁⠀⠀⠀⠀⠀⠀⢈⠐⠀⠀⠘⣿⣿⣿⣿⣿⣿⣿⠿⢿⣿⣿⣿⣿⣿⠃⠀⠀⠀⠀⠀⠀⣿⢸⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⠇⠀⠀⡐⠀⠀⠀⠀⠀⠌⠀⠀⠀⣦⡙⢿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠟⠁⠀⠀⠀⠠⠀⢀⠀⡏⣼⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⡿⢸⠀⠀⡄⠀⠀⠀⢀⠀⠈⠄⠀⠀⢸⣿⣷⣮⣛⢿⣿⣿⠿⠛⠉⠀⠀⠀⠀⠀⠠⢁⠂⠀⡄⡇⣿⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣇⠸⠀⠀⢃⠀⠀⢀⣀⠀⠀⠈⠀⠀⢸⣿⣿⣿⣿⠁⠈⠀⠀⠀⠀⠀⠀⠀⠀⠀⠐⠠⠀⠀⢳⢳⣿⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⡄⣀⣤⡄⠀⢹⣿⣿⡄⠀⠐⠈⡄⢺⣿⣿⣿⣿⣸⣷⣶⣤⣀⡀⠀⠀⠀⠀⠐⠈⡀⠀⠀⠘⣼⣿⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣾⣿⣿⣷⡠⠀⢷⣶⣧⠀⠀⠀⢂⢹⣿⣛⡻⠿⡿⣻⣭⣯⣿⣷⣿⣷⠀⣤⢈⠀⠀⠀⠀⢰⣿⣿⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣯⣾⣿⣿⣿⣿⣿⣷⡀⠈⣿⣿⡇⠀⠀⠀⡀⣿⣿⣿⣷⣾⣿⣿⣿⣿⣿⣿⣿⡄⣿⠈⡄⠀⠀⠀⠸⣿⣿⣿⣿⣿⣿⣿⣿⣿"
docker run -it --rm \
    -v "$(pwd)":/workspace \
    bad-apple-dev
